@{
    ActionDescriptor action = ViewBag.ActionInfo;
}
@section scripts{
    <script>
        if (ActionInfo.Action.toLowerCase().indexOf("my") == 0) {
            $$.common.getPageList.url = "/GetMyList";
        }
        if (ActionInfo.Action.toLowerCase().indexOf("its") == 0) {
            $$.common.getPageList.url = "/GetItsList?CanUseUserId=" + PageInfo.KeyValueStr;
        }
    </script>
}
<!-- Page header -->
<div class="layui-fluid">
    <div class="layui-row" style="margin-top:0px">
        <div class="layui-col-xs6">
            <form class="layui-form" id="searchForm">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width:auto">搜索</label>
                        <div class="layui-input-inline">
                            <input type="text" value="" class="layui-input" placeholder="搜索…" name="keyword" id="keyword" autocomplete="off">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <button class="layui-btn layui-btn-sm layui-btn-normal">搜索</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="layui-col-xs6" style="text-align: right; ">
            <div class="layui-form">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label" style="visibility:hidden;width:auto">按钮</label>
                    </div>
                    <div class="layui-inline">
                        @if (action.ActionName.ToLower() == "list")
                        {
                            <a href="/@(ViewBag.ActionInfo.ControllerDescriptor.ControllerName)/Edit" class="layui-btn layui-btn-sm" target="addtab">
                                添加任务类型
                            </a>
                        }
                        @if (action.ActionName.ToLower().StartsWith("my"))
                        {

                        }
                        @if (action.ActionName.ToLower().StartsWith("its"))
                        {
                            <a href="/@(ViewBag.ActionInfo.ControllerDescriptor.ControllerName)/Select" class="layui-btn layui-btn-sm" target="addtab">
                                添加任务类型
                            </a>
                        }
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="layui-fluid">
    <table id="table"></table>
</div>

<script type="text/template" id="actionTemplate">
    <div class="layui-inline">
        @if (action.ActionName.ToLower() == "list")
        {
            <a class="layui-btn layui-btn-sm" target="addtab" title="修改任务类型-{{=d.Id}}" href="/@(ViewBag.ActionInfo.ControllerDescriptor.ControllerName)/Edit/{{=d.Id}}">修改</a>
            <button class="layui-btn layui-btn-sm" lay-event="delete" style="display:none">删除</button>
        }
        @if (action.ActionName.ToLower().StartsWith("my"))
        {

        }
        @if (action.ActionName.ToLower().StartsWith("its"))
        {
            <button class="layui-btn layui-btn-sm" lay-event="remove">移除</button>
        }
    </div>
</script>
<script type="text/template" id="selectActionTemplate">
    <div class="layui-inline"><button class="layui-btn layui-btn-sm" lay-event="delete" style="display:none">删除</button></div>
</script>

<div class="layui-card" style="position: absolute; right: 0; bottom: 0; width: 350px;margin:0;@(action.ActionName.ToLower() == "myselect"||action.ActionName.ToLower() == "select"?"":"display:none")">
    <div class="layui-card-header layui-bg-blue"><button class="layui-btn layui-btn-xs layui-bg-red" id="minsize"><i class="layui-icon layui-icon-subtraction"></i></button><button class="layui-btn layui-btn-xs layui-bg-red" id="selectok"><i class="layui-icon layui-icon-ok"></i>确认</button></div>
    <div class="layui-card-body" style="padding:0;overflow:hidden" id="selectH">
        <table id="select_table"></table>
    </div>
</div>